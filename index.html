<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åœ¨æ·¡æ°´ï¼Œç·´ç¿’å’Œä½ ä¸€èµ·ç”Ÿæ´» ğŸŒ…</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700&display=swap');
        :root {
            --bg-color: #FDF6E3;
            --primary-color: #E58E58;
            --secondary-color: #5F8575;
            --text-color: #433431;
        }
        body { font-family: 'Noto Sans TC', sans-serif; background-color: var(--bg-color); color: var(--text-color); }
        .card { background: rgba(255, 255, 255, 0.96); backdrop-filter: blur(12px); }
        .btn-option { transition: all 0.2s; border: 2px solid #F1ECE1; }
        .btn-option:hover { border-color: var(--primary-color); background-color: #FFF9F2; }
        .btn-primary { background-color: var(--primary-color); color: white; transition: all 0.2s; }
        .btn-primary:active { transform: scale(0.98); }
        .progress-bar { height: 6px; background: #EEE; border-radius: 3px; overflow: hidden; }
        .progress-inner { height: 100%; background: var(--secondary-color); transition: width 0.3s; }
    </style>
</head>
<body class="min-h-screen flex items-center justify-center p-6">

    <div id="app" class="max-w-md w-full card rounded-[2.5rem] shadow-2xl p-8 border-t-8 border-[#E58E58]">
        
        <div id="start-screen" class="text-center">
            <div class="text-5xl mb-6">ğŸŒ…</div>
            <h1 class="text-2xl font-bold mb-1 tracking-wider">åœ¨æ·¡æ°´ï¼Œç·´ç¿’å’Œä½ ä¸€èµ·ç”Ÿæ´»</h1>
            <h2 class="text-[10px] text-[#5F8575] font-bold mb-8 uppercase tracking-[0.2em]">Our Cohabitation Manifesto</h2>

            <div class="text-left space-y-4 mb-10">
                <div class="bg-[#F8F3E9] p-6 rounded-2xl border border-[#EEE] shadow-sm">
                    <h3 class="text-xs font-bold text-[#E58E58] mb-3 flex items-center">
                        <span>âœ¨ About this Journey</span>
                    </h3>
                    <div id="welcome-msg" class="text-xs text-gray-500 leading-relaxed space-y-3">
                        <p>å˜¿ï¼Œæˆ‘å€‘è¦ä¸€èµ·åœ¨æ·¡æ°´å±•é–‹æ–°ç”Ÿæ´»äº†ã€‚ğŸ </p>
                        <p>åŒå±…ä¸åªæ˜¯ç©ºé–“çš„å…±äº«ï¼Œæ›´æ˜¯ç”Ÿæ´»ç¿’æ…£çš„äº¤æœƒã€‚ç‚ºäº†è®“æœªä¾†çš„æ¯ä¸€å¤©éƒ½åƒæ·¡æ°´çš„å¤•é™½ä¸€æ¨£æš–å¿ƒï¼Œè€Œä¸æ˜¯åƒå†¬é›¨é‚£æ¨£å†·å†°å†°ï¼Œæˆ‘æº–å‚™äº†é€™ä»½å°æ¸¬é©—ã€‚</p>
                        <p>é€™ä¸æ˜¯è€ƒè©¦ï¼Œä¹Ÿæ²’æœ‰æ¨™æº–ç­”æ¡ˆã€‚é€™æ˜¯ä¸€å ´é—œæ–¼ã€Œæˆ‘å€‘ã€çš„å°è©±ï¼Œè®“æˆ‘å€‘åœ¨æ¬é€²å»å‰ï¼Œæº«æŸ”åœ°å°é½Šå½¼æ­¤çš„æ­¥èª¿ã€‚â¤ï¸</p>
                    </div>
                </div>

                <div class="px-2">
                    <h3 class="text-[11px] font-bold text-[#5F8575] mb-2">ğŸ“œ éŠæˆ²è¦å‰‡èªªæ˜</h3>
                    <ul class="text-[11px] text-gray-400 space-y-2 list-none">
                        <li class="flex items-start"><span class="mr-2">â–¸</span> èª å¯¦ä½œç­”ï¼Œé€™è£¡æ²’æœ‰æ­£ç¢ºç­”æ¡ˆï¼Œåªæœ‰æˆ‘å€‘çš„å…±è­˜ã€‚</li>
                        <li class="flex items-start"><span class="mr-2">â–¸</span> å®Œæˆå¾Œï¼Œç³»çµ±æœƒç”Ÿæˆå°ˆå±¬é€£çµï¼Œè«‹åˆ†äº«çµ¦å¦ä¸€åŠã€‚</li>
                        <li class="flex items-start"><span class="mr-2">â–¸</span> å…©äººéƒ½å®Œæˆæ™‚ï¼Œæˆ‘å€‘å°±èƒ½çœ‹åˆ°é€™ä»½çè²´çš„é»˜å¥‘å ±å‘Šã€‚</li>
                    </ul>
                </div>
            </div>

            <button id="main-start-btn" onclick="startQuiz()" class="w-full py-4 rounded-2xl btn-primary font-bold text-lg shadow-lg">
                é–‹å•Ÿå°é½Šè¨ˆç•«
            </button>
        </div>

        <div id="quiz-screen" class="hidden">
            <div class="mb-6">
                <div class="flex justify-between items-center text-[10px] font-bold text-gray-400 mb-2">
                    <span id="progress-text">QUESTION 1 / 10</span>
                </div>
                <div class="progress-bar"><div id="progress-inner" class="progress-inner" style="width: 10%"></div></div>
            </div>
            <h2 id="question-text" class="text-lg font-bold mb-8 text-center leading-snug">é¡Œç›®è¼‰å…¥ä¸­...</h2>
            <div id="options" class="space-y-3"></div>
        </div>

        <div id="share-screen" class="hidden text-center">
            <div class="text-5xl mb-6">âœ‰ï¸</div>
            <h2 class="text-2xl font-bold mb-4">å¦³çš„éƒ¨åˆ†å·²å®Œæˆï¼</h2>
            <p class="text-gray-500 mb-8 text-sm leading-relaxed">æˆ‘å·²ç¶“æŠŠå¦³çš„æƒ³æ³•æ‰“åŒ…å¥½äº†ã€‚<br>è«‹é»æ“Šä¸‹æ–¹æŒ‰éˆ•è¤‡è£½é€£çµå‚³çµ¦ç”·å‹ï¼Œ<br>ç•¶ä»–å¯«å®Œï¼Œä½ å€‘å°±èƒ½çœ‹åˆ°å½¼æ­¤çš„é»˜å¥‘å ±å‘Šå›‰ï¼</p>
            <button onclick="copyLink()" class="w-full py-4 btn-primary rounded-2xl font-bold shadow-lg">
                è¤‡è£½é€£çµå‚³çµ¦ä»–
            </button>
            <input id="share-url-hidden" type="text" class="absolute -top-full left-0 opacity-0">
        </div>

        <div id="result-screen" class="hidden text-center">
            <h2 class="text-2xl font-bold mb-2">ğŸ“Š é»˜å¥‘å ±å‘Šæ›¸</h2>
            <p class="text-[10px] text-gray-400 mb-8 font-bold uppercase tracking-widest">The Results of Alignment</p>
            <div id="result-list" class="space-y-4 max-h-[50vh] overflow-y-auto pr-2 text-left"></div>
            <button onclick="location.href=window.location.pathname" class="mt-8 text-[10px] text-gray-300 underline uppercase">Restart Quiz</button>
        </div>
    </div>

    <script>
        const questions = [
            { q: "é—œæ–¼ã€Œæ·¡æ°´å†¬å¤©ã€ï¼Œé™¤æ¿•æ©Ÿçš„ç­–ç•¥æ˜¯ï¼Ÿ", options: ["24å°æ™‚å¼·åŠ›é™¤æ¿•ï¼Œæˆ‘è¦ä¹¾ç‡¥çš„äººç”Ÿ", "äººåœ¨å®¶æ‰é–‹ï¼Œçœé›»ç‚ºä¸Š", "æ„Ÿè¦ºç™¼éœ‰æ‰é–‹", "æˆ‘ä¸æ€•æ¿•ï¼Œæˆ‘æ€•ä¹¾"] },
            { q: "æˆ¿ç§Ÿèˆ‡æ—¥å¸¸å…¬è²»ï¼Œæˆ‘å€‘æ€éº¼åˆ†ï¼Ÿ", options: ["çµ•å°å…¬å¹³ 50/50", "ä¾è–ªæ°´æ¯”ä¾‹ (è³ºå¤šå‡ºå¤š)", "æˆ‘ä»˜æˆ¿ç§Ÿï¼Œä½ ä»˜é›œæ”¯", "è¨­å…±åŒéŒ¢åŒ…å…¬ç©é‡‘"] },
            { q: "æ´—ç¢—é€™ä»¶äº‹ï¼Œå¦³/ä½ çš„åº•ç·šæ˜¯ï¼Ÿ", options: ["åƒå®Œé¦¬ä¸Šæ´—ï¼Œæ°´æ§½å¿…é ˆæ·¨ç©º", "ç¡è¦ºå‰æ´—å®Œå°±å¥½", "éš”å¤©æ—©ä¸Šå†èªªå§", "ç©æ»¿ä¸€æ•´æ¡¶å†ä¸€èµ·è™•ç†"] },
            { q: "å¦‚æœæœ‰æœ‹å‹æƒ³ä¾†å®¶è£¡éå¤œï¼Ÿ", options: ["æå‰24å°æ™‚å‘ŠçŸ¥æ˜¯åŸºæœ¬å°Šé‡", "éš¨æ™‚æ­¡è¿ï¼Œæˆ‘å®¶å°±æ˜¯ä½ å®¶", "åƒ…é™é€±æœ«ï¼Œé »ç‡ä¸èƒ½å¤ªé«˜", "å®¶æ˜¯ç§äººç¦åœ°ï¼Œå„˜é‡ä¸è¦"] },
            { q: "é—œæ–¼ã€Œåƒåœ¾è»Šã€èˆ‡ã€Œè³‡æºå›æ”¶ã€ï¼Ÿ", options: ["èª°æœ‰ç©ºå°±èª°å»å€’", "è¦å®šå¥½å„è‡ªè² è²¬çš„é …ç›®", "ä¸æ„›å€’åƒåœ¾çš„äººï¼Œè«‹è² è²¬æ´—å»æ‰€", "ç›´æ¥è²·é«˜ç´šå»šé¤˜æ©Ÿè§£æ±º"] },
            { q: "åµæ¶ä¹‹å¾Œï¼Œæˆ‘å€‘çš„å’Œè§£æ©Ÿåˆ¶ï¼Ÿ", options: ["ç•¶å¤©å¿…é ˆè¬›æ¸…æ¥šï¼Œä¸å¸¶æƒ…ç·’ç¡è¦º", "çµ¦æˆ‘ç©ºé–“å†·éœï¼Œæ˜å¤©å†è«‡", "ä»€éº¼éƒ½ä¸ç”¨èªªï¼Œçµ¦æˆ‘ä¸€å€‹æ“æŠ±", "è²·å®µå¤œç•¶ä½œå’Œå¹³æ¢ç´„"] },
            { q: "é€±æœ«çš„æ—©æ™¨ï¼Œæˆ‘å€‘é€šå¸¸æœƒï¼Ÿ", options: ["ä¸€èµ·æ—©èµ·åƒæ—©é¤ï¼Œé–‹å•Ÿå¥åº·ç”Ÿæ´»", "å„ç¡å„çš„ï¼Œç¡é£½å†èªª", "ä¸€å€‹äººæ—©èµ·æ‰“é›»å‹•/æ»‘æ‰‹æ©Ÿ", "å¿…é ˆé»åœ¨ä¸€èµ·è³´åºŠ"] },
            { q: "å®¶è£¡çš„ã€Œç”Ÿæ´»å‚™å“ã€èª°ä¾†è£œï¼Ÿ", options: ["æˆ‘æ¯”è¼ƒç´°å¿ƒï¼Œæˆ‘ä¾†ç›£æ§", "èª°ç”¨å®Œæœ€å¾Œä¸€å€‹å°±èª°è²·", "æ¯å€‹æœˆå›ºå®šå»å¤§è³£å ´å¤§æ¡è³¼", "è¨­å…±äº«æ¸…å–® Appï¼Œèª°æœ‰ç©ºèª°è²·"] },
            { q: "åŒå±…å¾Œçš„ã€Œæµªæ¼«å„€å¼æ„Ÿã€ï¼Ÿ", options: ["æ¯é€±é¸ä¸€å¤© Date Night", "æ¯å¤©ç¡å‰éƒ½è¦èŠå¤© 10 åˆ†é˜", "ç¯€æ—¥ä¸€å®šè¦é€ç¦®ç‰©/æ…¶ç¥", "ç”Ÿæ´»å°±æ˜¯å„€å¼ï¼Œå¹³æ·¡æ‰æ˜¯çœŸ"] },
            { q: "å¦‚æœæˆ‘æƒ³ã€Œä¸€å€‹äººéœéœã€ï¼Ÿ", options: ["ç›´æ¥èªªå‡ºå£ï¼Œå°æ–¹å¿…é ˆç†è§£", "æˆ´ä¸Šè€³æ©Ÿå°±æ˜¯æˆ‘çš„éš±å½¢è­·ç›¾", "æˆ‘æœƒèº²é€²å»æ‰€æˆ–æ›¸æˆ¿", "æˆ‘ä¸éœ€è¦ç¨è™•ï¼Œæˆ‘è¦è·Ÿä½ é»åœ¨ä¸€èµ·"] }
        ];

        let partnerAnswers = null;
        let myAnswers = [];
        let currentQ = 0;

        window.onload = () => {
            const urlParams = new URLSearchParams(window.location.search);
            const data = urlParams.get('ans');
            const welcomeMsg = document.getElementById('welcome-msg');
            
            if (data) {
                partnerAnswers = data.split('').map(Number);
                welcomeMsg.innerHTML = `
                    <p>å˜¿ï¼Œæ”¶åˆ°å¦ä¸€åŠå‚³ä¾†çš„å°é½Šé‚€è«‹äº†ï¼â¤ï¸</p>
                    <p>å¥¹å·²ç¶“å®Œæˆä½œç­”å›‰ï¼Œç¾åœ¨è¼ªåˆ°ä½ åˆ†äº«ä½ çš„æƒ³æ³•ã€‚é€™ä¸æ˜¯è¦æ‰¾æ¨™æº–ç­”æ¡ˆï¼Œè€Œæ˜¯ç‚ºäº†è®“æˆ‘å€‘æœªä¾†çš„æ·¡æ°´ç”Ÿæ´»æ›´é †æš¢ã€‚</p>
                    <p>å®Œæˆå¾Œï¼Œä½ å€‘å°±èƒ½ç«‹åˆ»çœ‹åˆ°å½¼æ­¤çš„å¥‘åˆå ±å‘Šã€‚é–‹å§‹å§ï¼</p>
                `;
                document.getElementById('main-start-btn').innerText = "æ¥å—æŒ‘æˆ°ä¸¦ä½œç­”";
            }
        };

        function startQuiz() {
            document.getElementById('start-screen').classList.add('hidden');
            document.getElementById('quiz-screen').classList.remove('hidden');
            showQuestion();
        }

        function showQuestion() {
            const q = questions[currentQ];
            const progress = ((currentQ + 1) / questions.length) * 100;
            document.getElementById('progress-text').innerText = `QUESTION ${currentQ + 1} / ${questions.length}`;
            document.getElementById('progress-inner').style.width = `${progress}%`;
            document.getElementById('question-text').innerText = q.q;
            
            const optionsDiv = document.getElementById('options');
            optionsDiv.innerHTML = '';
            q.options.forEach((opt, index) => {
                const btn = document.createElement('button');
                btn.className = "w-full text-left p-4 rounded-xl btn-option text-sm leading-relaxed";
                btn.innerText = opt;
                btn.onclick = () => {
                    myAnswers.push(index);
                    if (currentQ < questions.length - 1) {
                        currentQ++;
                        showQuestion();
                    } else {
                        finishQuiz();
                    }
                };
                optionsDiv.appendChild(btn);
            });
        }

        function finishQuiz() {
            document.getElementById('quiz-screen').classList.add('hidden');
            if (partnerAnswers) {
                showResult();
            } else {
                const ansString = myAnswers.join('');
                const shareUrl = window.location.origin + window.location.pathname + '?ans=' + ansString;
                document.getElementById('share-url-hidden').value = shareUrl;
                document.getElementById('share-screen').classList.remove('hidden');
            }
        }

        function showResult() {
            document.getElementById('result-screen').classList.remove('hidden');
            const resultList = document.getElementById('result-list');
            questions.forEach((q, i) => {
                const match = myAnswers[i] === partnerAnswers[i];
                const item = document.createElement('div');
                item.className = `p-5 rounded-[1.5rem] border ${match ? 'border-green-100 bg-green-50/50' : 'border-orange-100 bg-orange-50/50'}`;
                item.innerHTML = `
                    <p class="font-bold text-xs mb-3 text-gray-700">${i+1}. ${q.q}</p>
                    <div class="grid grid-cols-2 gap-2 text-[10px]">
                        <div class="bg-white/80 p-2 rounded-xl">ğŸ‘§ï¼š${q.options[myAnswers[i]]}</div>
                        <div class="bg-white/80 p-2 rounded-xl">ğŸ‘¦ï¼š${q.options[partnerAnswers[i]]}</div>
                    </div>
                `;
                resultList.appendChild(item);
            });
        }

        function copyLink() {
            const copyText = document.getElementById("share-url-hidden");
            copyText.select();
            copyText.setSelectionRange(0, 99999);
            try {
                navigator.clipboard.writeText(copyText.value);
                alert("é€£çµå·²è¤‡è£½ï¼å¿«å‚³çµ¦ç”·å‹å§ï½ ğŸƒâ€â™‚ï¸ğŸ’¨");
            } catch (err) {
                document.execCommand("copy");
                alert("é€£çµå·²è¤‡è£½ï¼");
            }
        }
    </script>
</body>
</html>
